<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="../../resources/css/portal.css" rel="stylesheet" type="text/css" />
        <title>Component Management System Portal</title>
    </h:head>

    <h:body>

        <div id="top" class="topContent">
            <div id="topLeft" class="topLeftContent">
                <ui:insert name="topLeft">
                    <h:graphicImage alt="ANL Logo" url="../../resources/images/AnlLogo167x75.png"/>
                </ui:insert>
            </div>
            <div>
                <div id="topRight" class="topRightContent">
                    <ui:insert name="topRight">
                        <h:outputText value="Username: #{loginController.displayUsername()}"/>
                        <br/>

                        <h:outputText value="Role: #{loginController.displayRole()}"/>

                    </ui:insert>
                </div>
                <div id="topCenter" class="topCenterContent">
                    <ui:insert name="topCenter">
                        <h1>Component Management System Portal</h1>
                    </ui:insert>
                </div>
            </div>
        </div>

        <ui:fragment>
            <div id="menu" class="menuContent">
                <div id="menuLeft" class="menuLeftContent">
                    <ui:insert name="menuLeft">
                        <p:menubar/>
                    </ui:insert>
                </div>
                <div>
                    <div id="menuRight" class="menuRightContent">
                        <ui:insert name="menuRight">
                        </ui:insert>
                    </div>
                    <div id="menuCenter" class="menuCenterContent">
                        <ui:insert name="menuCenter">
                            <h:form prependId="false">
                                <p:menubar>
                                    <p:menuitem value="Home" url="/faces/views/home.xhtml" icon="ui-icon-home"/>
                                    <p:menuitem value="Collections" url="/faces/views/collection/list.xhtml"/>
                                    <p:menuitem value="Components" url="/faces/views/component/list.xhtml"/>
                                    <p:menuitem value="Component Types" url="/faces/views/componentType/list.xhtml"/>
                                    <p:menuitem value="Property Types" url="/faces/views/propertyType/list.xhtml"/>
                                    <p:menuitem value="Sources" url="/faces/views/source/list.xhtml"/>
                                    <p:menuitem value="Users" url="/faces/views/user/list.xhtml"/>
                                    <p:menuitem value="Settings" action="#{userController.prepareSessionUserEdit('/faces/views/user/edit.xhtml')}" rendered="#{loginController.loggedIn}" icon="ui-icon-gear"/>
                                    <p:menuitem value="Login" onclick="loginDialog.show()" rendered="#{!loginController.loggedIn}" icon="ui-icon-person"/>
                                    <p:menuitem value="Logout" action="#{loginController.logout()}" rendered="#{loginController.loggedIn}" icon="ui-icon-close"/>                                </p:menubar>
                            </h:form>
                        </ui:insert>
                    </div>
                </div>
            </div>

            <div id="middle" class="middleContent">
                <div id="middleLeft" class="middleLeftContent">
                    <ui:insert name="middleLeft">
                    </ui:insert>
                </div>
                <div>
                    <div id="middleRight" class="middleRightContent">
                        <ui:insert name="middleRight">
                        </ui:insert>
                    </div>
                    <div id="middleCenter" class="middleCenterContent">
                        <ui:insert name="middleCenter">
                        </ui:insert>
                    </div>
                </div>
            </div>
        </ui:fragment>

        <ui:fragment>
            <div id="bottom" class="bottomContent">
                <ui:insert name="bottom">
                    <h:form prependId="false">
                        <p:growl id="messages" showDetail="true" autoUpdate="true"/>
                    </h:form>
                </ui:insert>
            </div>
        </ui:fragment>

        <h:form id="loginForm">
            <p:dialog id="loginDialog" styleClass="dialog" header="Login" widgetVar="loginDialog">
                <h:panelGrid styleClass="loginInput">
                    <div class="dialog">
                        <div>
                            <p:inputText id="username" value="#{loginController.username}" title="Username"/>
                            <p:watermark for="username" value="Username"/>
                            <p:password id="password" value="#{loginController.password}" title="Password"/>
                            <p:watermark for="password" value="Password"/>
                        </div>

                        <f:facet name="footer">
                            <p:commandButton id="loginButton" value="Login" action="#{loginController.login}" oncomplete="loginDialog.hide()"/>
                        </f:facet>
                    </div>
                </h:panelGrid>
            </p:dialog>
        </h:form>
    </h:body>

</html>
