<?xml version="1.0" encoding="UTF-8" ?>
<!--
Copyright (c) UChicago Argonne, LLC. All rights reserved.
See LICENSE file.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <p:outputPanel id='#{entityTypeName}CoreMetadataPropertyButtonsOutputpanel'>
        <div class="actionButton">

            <p:commandButton id="#{entityTypeName}CoreMetadataPropertyEditButton" 
                             action="#{entityController.setCurrentEditPropertyValue(itemObject.coreMetadataPropertyValue)}" 
                             rendered="#{isEntityWriteable and loginController.loggedIn}" 
                             value="Edit" 
                             alt="Edit" 
                             update="@form"
                             onstart="PF('loadingDialog').show();"
                             onerror="PF('loadingDialog').hide();"
                             oncomplete="PF('loadingDialog').hide(); PF('#{entityTypeName}coreMetadataPropertyDialog').show()"
                             icon="fa fa-pencil">
                <p:tooltip for="#{entityTypeName}CoreMetadataPropertyEditButton" 
                           value="Edit #{domainEntityObject.coreMetadataPropertyTitle}."/>
            </p:commandButton>

        </div>
    </p:outputPanel>

    <p:scrollPanel style="max-height: 550px"
                   mode="native">
        <p:dataTable id="#{entityTypeName}CoreMetadataPropertyListDataTable"
                     value="#{itemObject.coreMetadataPropertyValue.propertyMetadataBaseList}"                     
                     var="metadata">
            <p:column headerText=""
                      filterBy="#{metadata.metadataKey}"
                      filterable="#{filterablePropertyValueMetadataList}"
                      sortable="true"
                      filterMatchMode="contains">
                <h:outputText value="#{metadata.metadataKey}"/>
            </p:column>
            <p:column headerText=""
                      filterBy="#{metadata.metadataValue}"
                      filterable="#{filterablePropertyValueMetadataList}"
                      sortable="true"
                      filterMatchMode="contains">
                <h:outputText value="#{metadata.metadataValue}" />
            </p:column>
        </p:dataTable>
    </p:scrollPanel>

    <ui:include src="./coreMetadataPropertyEditDialog.xhtml"/>

</ui:composition>
